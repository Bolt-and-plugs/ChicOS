#include "render.h"
#include "../../chicos.h"
#include "../memory/mem.h"

extern App app;

void print_logo() {
  printf("                                                                     "
         "                \n");
  printf("                                                                     "
         "                \n");
  printf("                                      @@@@@  @     @@@@              "
         "                \n");
  printf("                            @@@@    @@@@@@@@@@  @@@@@@@@@@           "
         " @              \n");
  printf("                      @@@   @@@    @@@          @@@     @@@          "
         "   @@           \n");
  printf("                   @@@@@     @@@   @@@         @@@@      @@@         "
         "    @@@@        \n");
  printf("              @@     @@@@    @@@@  @@@@      @  @@@     @@@@      @  "
         "   @@@@@@@@     \n");
  printf("           @@@@@      @@@@    @@@   @@@@@@@@@@   @@@@@@@@@@       @  "
         "    @@@@@@@@@   \n");
  printf("        @     @@@ @@@@@@@@    @@@@      @@@          @@@         @   "
         "     @@@@@@@@@@ \n");
  printf("       @@@    @@@@@     @@@   @@@  @@@@@@@@@                 @@  @@  "
         "       @@@@@@@@@\n");
  printf("    @@@@@@@    @@@@     @@@@   @@           @ @@      @@@ @@@@@@@    "
         "         @@@@@@@\n");
  printf("   @@@          @@@@         @          @@@ @@@@@@@ @  @@@@@@@@ @    "
         "           @@@@@\n");
  usleep(400000);
  printf("  @@@        @   @@@        @      @@@ @@@@@@@@@@@@@@@@ @            "
         "             @@@\n");
  printf("  @@@       @@@            @     @  @@@@@@@  @@@@@@@@@@@@@@@ @       "
         "               @\n");
  printf("  @@@@@   @@@@            @  @@ @@@@@@@ @@@@@ @@@@@@@@  @@@@@@@ @   "
         "@@               \n");
  printf("   @@@@@@@@@      @@      @  @@@@@@@@@@  @@@    @@@@@@@  @ "
         "@@@@@@@@@@                \n");
  usleep(400000);
  printf("                         @ @@ @@@@@@@@@@@@@@@   @@@@@@@@    @@@@ @@  "
         "                \n");
  printf("           @@  @           @@    @@@      @@@@@@@@@@@ @@             "
         "                 \n");
  printf("         @    @@ @  @@ @    @@  @ @@  @@@@@@@@@@@@@  @@@@ @@@@       "
         "                \n");
  printf("         @ @ @@  @ @@@     @@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@  @@ @    "
         "                \n");
  usleep(400000);
  printf("         @ @@   @ @@@@  @@ @@@ @@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@  "
         "                \n");
  printf("         @ @@    @@@@ @ @@  @@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@ @@@ "
         "@                \n");
  printf("         @   @  @@       @   @@@@@@@@@@@@@@@@@@ @@ @ @@@      @@@  "
         "@@ @              \n");
  printf("        @      @ @   @ @@ @    @@@ @@@@@@@@@ @@@@@@ @@@         @@@ "
         "@@@@             \n");
  usleep(400000);
  printf("         @@    @ @@@@@     @    @@@@@@@@@@@@@ @ @@ @@@@@         @@@ "
         "@@@@            \n");
  printf("      @    @@ @@@@@@@  @ @     @@@@@@@@ @@ @@@ @  @@@ @@@       "
         "@@@@@@@@ @           \n");
  printf("            @@@@ @    @@      @    @@@@@@@@@ @@@ @@ @@@@@@@@@     @ "
         "@@@@@ @          \n");
  printf("      @ @@  @@@@@@    @@     @   @@ @@ @@  @@@@ @@    @@@@@@        "
         "@@@ @@@          \n");
  usleep(400000);
  printf("       @@@@  @  @@  @ @        @@ @  @ @@@@ @@@@@      @@@@ @       "
         "@@ @@@           \n");
  printf("        @ @     @@@@@ @     @  @  @@@@@ @@@ @@@@       @ @@@ @@    "
         "@@ @    @         \n");
  printf("          @  @@@@@@ @  @   @   @@@  @@  @@@@@@@        @@@@@@@@@@@ "
         "@@@@@@@@@@        \n");
  printf("           @@@@@@@@@@ @@@ @    @@@@ @@@@@@@@@@       @@ @@@@@@@@ @@  "
         "@@@@@@@@@       \n");
  usleep(400000);
  printf("            @@@@@ @@@ @   @@@ @@@    @@ @@@ @@@@@ @@@@  @@ "
         "@@@@@@@@@@@@@             \n");
  printf("               @@@ @@     @@@@@@@@@   @ @@@@@@@        @@@@@@@@@     "
         "@  @@@@         \n");
  printf("                @@@@      @ @@@@@@@@@@@@@@@@@@@ @ @   @     @@    "
         "@@@    @@@@        \n");
  printf("                 @@@@@   @@@@@@@@@@@     @ @@@@      @@@@ @@@@    @@ "
         "   @@@@@@       \n");
  usleep(400000);
  printf("                  @@@@@@@ @@@@@@ @@             @@@@@   @   @@@   @@ "
         "   @@  @@@      \n");
  printf("                   @@@  @@@ @@@       @@@@@@@@   @@@   @    @@@@ @@@ "
         "   @@@@@@@@     \n");
  printf("                  @@@@@@@@@@     @@  @@@    @@@   @@@@@@@     @@@@@@ "
         "  @@@    @@@    \n");
  printf("                        @ @@@@@@@@@  @@@    @@@   @@@   @  @   @@@@@ "
         "  @@@    @@@@   \n");
  printf("                        @@@@ @@@      @@@@@@@@     @@@    @@   @@@@@ "
         "                \n");
  printf("                         @   @@@      @@@  @@@@    @@@@@@@@@         "
         "                \n");
  printf("                             @@@@      @@@   @@@@ @@                 "
         "                \n");
  printf("                              @@@      @@@@                          "
         "                 \n");
  printf("                              @@@@    @@                             "
         "                 \n");
  printf("                               @@@@                                  "
         "                \n");
  sleep(3);
  system("clear");
}

void print_welcome() {
  printf("\nBEM-VINDO\n");
  sleep(3);
  system("clear");
}

void render_loop() {
  while (!app.loop_stop) {
    printf("free mem: %2.2f%c \n", retrieve_free_mem_percentage(), '%');
    printf("used mem: %2.2f%c \n", retrieve_used_mem_percentage(), '%');
    printf("quantum time: %ld\n", app.cpu.quantum_time);
    usleep(10000);
    system("clear");
  }
}

void *init_render(void *arg) {
  if (arg && strncmp((char *)arg, "logo", 5) == 0) {
    print_logo();
  }
  print_welcome();
  render_loop();
  return NULL;
}
